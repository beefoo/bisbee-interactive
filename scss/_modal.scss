@import "mixins";
@import "variables";

$curtainDuration: 4s;
$bgDuration: 3.75s;

.modal {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;

  .curtain {

    &, &:before {
      position: absolute;
      width: 50%;
      height: 100%;
      top: 0;
      background: #222 no-repeat;
      background-size: cover;
    }

    &:before {
      content: ' ';
      width: 100%;
      left: 0;
      opacity: 0.5;
    }

    &.left {
      left: 0;
      background-image: url(../img/bisbee-bg-left.jpg);

      &, &:before {
        background-position: right center;
        @include animation(bounce-out-left ($bgDuration + 1s));
      }

      &:before {
        background-image: url(../img/curtain-bg-left.jpg);
        @include animation-duration(($curtainDuration + 1s));
      }
    }

    &.right {
      right: 0;
      background-image: url(../img/bisbee-bg-right.jpg);

      &, &:before {
        background-position: left center;
        @include animation(bounce-out-right ($bgDuration + 1s));
      }

      &:before {
        background-image: url(../img/curtain-bg-right.jpg);
        @include animation-duration(($curtainDuration + 1s));
      }
    }
  }

  .guide {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    @include animation(bounceOutUp 1s);

    &:before,
    &:after {
      content: ' ';
      width: 128px;
      height: 39px;
      position: absolute;
      left: 50%;
      margin-left: -64px;
      opacity: 0;
    }

    &:before {
      background: url(../img/arrow-up.png);
      top: 50px;
    }
    &:after {
      background: url(../img/arrow-down.png);
      bottom: 50px + $menuHeight;
    }

    .guide-content {
      position: relative;
      width: 500px;
      margin: 0 auto;
      padding: 30px;
      top: 50%;
      text-align: center;
      background: rgba($black, 0.5);
      @include transform(translateY(-50%));

      p {
        font-size: 1.2em;
        line-height: 1.8;
      }

      > p:first-child {
        margin-top: 0;
      }

      .key {
        font-size: 0.8em;
        padding: 4px 6px;
        background: rgba($medium, 0.7);
      }
    }

    .guide-confirm {
      &:before {
        content: 'Okay, Let\'s Begin';
      }
      &.active:before {
        content: 'Okay, Continue';
      }
    }
  }

  &.active {
    display: block;

    .curtain {

      &.left {
        &, &:before {
          @include animation(bounce-in-left $bgDuration);
        }

        &:before {
          @include animation-duration($curtainDuration);
        }
      }

      &.right {
        &, &:before {
          @include animation(bounce-in-right $bgDuration);
        }

        &:before {
          @include animation-duration($curtainDuration);
        }
      }

    }

    .guide {
      @include animation(bounceInDown 2s);
      @include animation-delay($curtainDuration);

      &:before,
      &:after {
        @include animation(blink 3s infinite);
        @include animation-delay($curtainDuration + 3s);
      }
    }

  }
}
